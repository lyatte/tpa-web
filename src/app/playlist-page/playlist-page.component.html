<div id="container">
    <div class="playlistInfo">
        <div class="thumbnail">
            <img src="{{ thumbnail }}" alt="">
        </div>
        <div class="title">
            {{ playlist.playlist_title }}
            <img src="../../assets/delete_icon.png" alt="" (click)="deletePlaylist()" *ngIf="isSame">
        </div>
        <div class="infos">{{ videoCount }} video . {{ playlist.playlist_views }}x watched . Last updated {{ playlist.playlist_day }} {{ getMonth(playlist.playlist_month) }} {{ playlist.playlist_year }}</div>
        <div class="buttons">
            <button>
                <img src="../../assets/share_icon.png" alt="">
            </button>
        </div>
        <div class="playlistDesc">{{ playlist.playlist_desc }}</div>
        <hr>
        <div class="bottomInfo">
            <div class="channelInfo" routerLink="/channel/{{ playlistChannel.channel_id }}">
                <img src="{{ playlistChannel.channel_icon }}" alt="">
                <div class="chName">
                    {{ playlistChannel.channel_name }}
                </div>
            </div>

            <div class="rightSide" *ngIf="isSame==false">
                <div class="subscribeButton" *ngIf="isSubscribed == false">
                    <button (click)="subscribe()">
                        SUBSCRIBE
                    </button>
                </div>
                <div class="alrSubscribe" *ngIf="isSubscribed">
                    <button (click)="subscribe()">
                        SUBSCRIBED
                    </button>

                    <img src="../../assets/subscribed_logo.png" alt="">
                </div>

            </div>
        </div>
    </div>

    <div class="playlistVids">
        <div class="filtering">
            <div>
                <img src="../../assets/filter_search.png" alt="">
                FILTER
            </div>
            <div class="f">
                <div class="filterDate">
                    <hr>
                    <button (click)="filter(1)">Most Popular</button>
                    <button (click)="filter(2)">Published Date</button>
                    <button (click)="filter(3)">Date Added</button>
                </div>
            </div>
        </div>

        <div class="videoSection">
            <div *ngFor="let video of videos, let i = index">
                <div class="videoDetail" *ngIf="i<(lastKey)">
                    <video style="display: none;" src="{{ video.video }}" (loadedmetadata)="setDuration(i, $event)"></video>

                    <div class="image">
                        <img src="{{ video.video_thumbnail }}" routerLink="/video/{{ video.video_id }}" alt="">

                        <div class="queue" (click)="addToQueue(video.video_id)">
                            <img src="../../assets/add_to_queue.png" alt="">
                            Add To Queue
                        </div>
                        
                        <div class="premium-vid" *ngIf="premVids[i]">
                            <img src="../../assets/premium_icon.jpg" alt="">
                            Premium
                        </div>
                        <div class="duration">{{ videoDuration[i] }}</div>
                    </div>

                    <div class="videoText">
                        <div class="top">
                            <div routerLink="/video/{{ video.video_id }}">{{ video.video_title }}</div>
                            <div>
                                <img src="../../assets/delete_icon.png" alt="" (click)="deleteVideoPlaylist(video.video_id)" *ngIf="isSame">
                                <img class="im" src="../../assets/three_dots_logo.png" alt="" (click)="openModalPlaylist(video.video_id)">
                            </div>
                        </div>
                        <div class="details" routerLink="/channel/{{ video.channel_id }}"> {{ video.channel_name }} . {{ getViews(video.video_views) }} views . {{ getDay(video.day, video.month, video.year) }} </div>
                        <div class="desc">{{ getShortDesc(video.video_description) }}</div>
                    </div>
                </div>
            </div>

        </div>

        <div class="footer"></div>
    </div>

    <div id="playlistModal" class="modal">
        <div class="modal-content">
            <span class="close" (click) = "closeModalPlaylist()">&times;</span>
            <div class="playlist" *ngFor="let p of userPlaylist">
                <button (click)="addToPlaylist( p.playlist_id )">
                    <img src="../../assets/add_playlist_icon.png" alt="">
                    <li>
                        {{ p.playlist_title }}
                    </li>
                </button>
            </div>

            <button (click)="createPlaylist()">
                <img src="../../assets/add_playlist_icon.png" alt="">
                <li>
                    Add new playlist
                </li>
            </button>
        </div>
    </div>

    <div id="addModal" class="modal">
        <div class="modal-content">
            <span class="close" (click)="close()">&times;</span>
            <input type="text" id="pName" placeholder="Input playlist name">
            <button (click) = "create()">Create Playlist</button>
        </div>
    </div>
</div>